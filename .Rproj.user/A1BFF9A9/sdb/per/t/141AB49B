{
    "collab_server" : "",
    "contents" : "library(foreign)\nlibrary(dplyr)\n\nif (!file.exists(\"Pobreza.zip\")) {\n      download.file(\"http://iinei.inei.gob.pe/iinei/srienaho/descarga/STATA/546-Modulo34.zip\", \n                    destfile = \"./Pobreza.zip\")\n      unzip(\"Pobreza.zip\", exdir = \"Pobreza\")\n}\n\npob<-read.dta(\"./Pobreza/sumaria-2016.dta\")\n\nLima<-pob[grep(\"^1501\", pob$ubigeo),]\n\nfor(i in 1:length(Lima$ubigeo)) {\n      if (Lima$ubigeo[i] == \"150101\") {\n            Lima$ubigeo[i] <- \"Lima\"\n      } else if (Lima$ubigeo[i] == \"150102\") {\n            Lima$ubigeo[i] <- \"Ancon\"\n      } else if (Lima$ubigeo[i] == \"150103\") {\n            Lima$ubigeo[i] <- \"Ate\"\n      } else if (Lima$ubigeo[i] == \"150104\") {\n            Lima$ubigeo[i] <- \"Barranco\"\n      } else if (Lima$ubigeo[i] == \"150105\") {\n            Lima$ubigeo[i] <- \"Brena\"\n      } else if (Lima$ubigeo[i] == \"150106\") {\n            Lima$ubigeo[i] <- \"Carabayllo\"\n      } else if (Lima$ubigeo[i] == \"150107\") {\n            Lima$ubigeo[i] <- \"Chaclacayo\"\n      } else if (Lima$ubigeo[i] == \"150108\") {\n            Lima$ubigeo[i] <- \"Chorrillos\"\n      } else if (Lima$ubigeo[i] == \"150109\") {\n            Lima$ubigeo[i] <- \"Cieneguilla\"\n      } else if (Lima$ubigeo[i] == \"150110\") {\n            Lima$ubigeo[i] <- \"Comas\"\n      } else if (Lima$ubigeo[i] == \"150111\") {\n            Lima$ubigeo[i] <- \"El Agustino\"\n      } else if (Lima$ubigeo[i] == \"150112\") {\n            Lima$ubigeo[i] <- \"Independencia\"\n      } else if (Lima$ubigeo[i] == \"150113\") {\n            Lima$ubigeo[i] <- \"Jesus Maria\"\n      } else if (Lima$ubigeo[i] == \"150114\") {\n            Lima$ubigeo[i] <- \"La Molina\"\n      } else if (Lima$ubigeo[i] == \"150115\") {\n            Lima$ubigeo[i] <- \"La Victoria\"\n      } else if (Lima$ubigeo[i] == \"150116\") {\n            Lima$ubigeo[i] <- \"Lince\"\n      } else if (Lima$ubigeo[i] == \"150117\") {\n            Lima$ubigeo[i] <- \"Los Olivos\"\n      } else if (Lima$ubigeo[i] == \"150118\") {\n            Lima$ubigeo[i] <- \"Lurigancho\"\n      } else if (Lima$ubigeo[i] == \"150119\") {\n            Lima$ubigeo[i] <- \"Lurin\"\n      } else if (Lima$ubigeo[i] == \"150120\") {\n            Lima$ubigeo[i] <- \"Magdalena del Mar\"\n      } else if (Lima$ubigeo[i] == \"150121\") {\n            Lima$ubigeo[i] <- \"Pueblo Libre\"\n      } else if (Lima$ubigeo[i] == \"150122\") {\n            Lima$ubigeo[i] <- \"Miraflores\"\n      } else if (Lima$ubigeo[i] == \"150123\") {\n            Lima$ubigeo[i] <- \"Pachacamac\"\n      } else if (Lima$ubigeo[i] == \"150124\") {\n            Lima$ubigeo[i] <- \"Pucusana\"\n      } else if (Lima$ubigeo[i] == \"150125\") {\n            Lima$ubigeo[i] <- \"Puente Piedra\"\n      } else if (Lima$ubigeo[i] == \"150126\") {\n            Lima$ubigeo[i] <- \"Punta Hermosa\"\n      } else if (Lima$ubigeo[i] == \"150127\") {\n            Lima$ubigeo[i] <- \"Punta Negra\"\n      } else if (Lima$ubigeo[i] == \"150128\") {\n            Lima$ubigeo[i] <- \"Rimac\"\n      } else if (Lima$ubigeo[i] == \"150129\") {\n            Lima$ubigeo[i] <- \"San Bartolo\"\n      } else if (Lima$ubigeo[i] == \"150130\") {\n            Lima$ubigeo[i] <- \"San Borja\"\n      } else if (Lima$ubigeo[i] == \"150131\") {\n            Lima$ubigeo[i] <- \"San Isidro\"\n      } else if (Lima$ubigeo[i] == \"150132\") {\n            Lima$ubigeo[i] <- \"San Juan de Lurigancho\"\n      } else if (Lima$ubigeo[i] == \"150133\") {\n            Lima$ubigeo[i] <- \"San Juan de Miraflores\"\n      } else if (Lima$ubigeo[i] == \"150134\") {\n            Lima$ubigeo[i] <- \"San Luis\"\n      } else if (Lima$ubigeo[i] == \"150135\") {\n            Lima$ubigeo[i] <- \"San Martin de Porres\"\n      } else if (Lima$ubigeo[i] == \"150136\") {\n            Lima$ubigeo[i] <- \"San Miguel\"\n      } else if (Lima$ubigeo[i] == \"150137\") {\n            Lima$ubigeo[i] <- \"Santa Anita\"\n      } else if (Lima$ubigeo[i] == \"150138\") {\n            Lima$ubigeo[i] <- \"Santa Maria del Mar\"\n      } else if (Lima$ubigeo[i] == \"150139\") {\n            Lima$ubigeo[i] <- \"Santa Rosa\"\n      } else if (Lima$ubigeo[i] == \"150140\") {\n            Lima$ubigeo[i] <- \"Santiago de Surco\"\n      } else if (Lima$ubigeo[i] == \"150141\") {\n            Lima$ubigeo[i] <- \"Surquillo\"\n      } else if (Lima$ubigeo[i] == \"150142\") {\n            Lima$ubigeo[i] <- \"Villa El Salvador\"\n      } else if (Lima$ubigeo[i] == \"150143\") {\n            Lima$ubigeo[i] <- \"Villa Maria del Triunfo\"\n      } else {next}\n}\n\ndele <-Lima$ingmo2hd>1\nLima<-Lima[dele,]\n\nLima.plot<-Lima %>% \n      group_by(ubigeo) %>% \n      summarise(gross_income = median(ingmo1hd),\n                net_income = median(ingmo2hd),\n                household_people = mean(totmieho),\n                income_recipients = mean(percepho),\n                food_expenditure = median(gru11hd),\n                clothing_expenditure = median(gru21hd),\n                health_expenditure = median(gru51hd),\n                transportation_expenditure = median(gru61hd)\n      )\n\n\nlatitude<-c(-11.807917,-12.026773,-12.14375,-12.058504,-11.872352,-11.977834,\n            -12.187650,-12.11769,-11.931642,-12.048210,-11.994171,-12.075029,\n            -12.082804,-12.073624,-12.046374,-12.083708,-11.959464,-12.006649,\n            -12.252539,-12.090435,-12.111933,-12.209471,-12.482609,-12.078759,\n            -11.863822,-12.310658,-12.027461,-12.384381,-12.097285,-12.097183,\n            -11.969031,-12.153022,-12.075570,-11.981557,-12.077450,-12.047925,\n            -11.810610,-12.141128,-12.115745,-12.215773,-12.163599)\n\nlongitude<-c(-77.132092,-76.889576,-77.019029,-77.050670,-77.022605,-76.773461,\n             -77.007764,-76.812033,-77.054250,-77.000509,-77.052437,-77.043529,\n             -76.929487,-77.017855,-77.042793,-77.031959,-77.076024,-76.917687,\n             -76.884048,-77.069999,-77.031538,-76.853990,-76.773382,-77.065541,\n             -77.079145,-76.813967,-77.035971,-76.770878,-76.995102,-77.032585,\n             -76.994014,-76.971839,-76.995957,-77.096882,-77.093403,-76.968625,\n             -77.165764, -76.991898,-77.019012,-76.941890,-76.944152)\n\nLima.plot<-data_frame(district=Lima.plot$ubigeo,\n                      longitude=longitude,\n                      latitude = latitude,\n                      gross_income = Lima.plot$gross_income,\n                      net_income = Lima.plot$net_income,\n                      household_people = Lima.plot$household_people,\n                      income_recipients = Lima.plot$income_recipients,\n                      food_expenditure = Lima.plot$food_expenditure,\n                      clothing_expenditure = Lima.plot$clothing_expenditure,\n                      health_expenditure = Lima.plot$health_expenditure,\n                      transportation_expenditure = Lima.plot$transportation_expenditure)\n\nwrite.csv(Lima.plot, \"./Lima_plot.csv\", row.names = FALSE)\n",
    "created" : 1495474680597.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "854732891",
    "id" : "141AB49B",
    "lastKnownWriteTime" : 1495481767,
    "last_content_update" : 1495481767494,
    "path" : "C:/Users/Jose Luis Rolando/Dropbox/PhD/R Coursera/DevelopingDataProducts/Week4/Rolando_project/data.R",
    "project_path" : "data.R",
    "properties" : {
        "tempName" : "Untitled5"
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}